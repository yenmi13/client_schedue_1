<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hipporizz èª¿è‰²ç›¤å¾®å…‰é¢¨æ‰‡ - æ™‚ç¨‹è¡¨</title>
    <style>
        :root {
            --ink: #1a1a1a;
            --paper: #fafafa;
            --gray-light: #f5f5f5;
            --gray-mid: #e0e0e0;
            --gray-dark: #888;
            --accent: #c41e3a;
            --accent-light: #fff0f3;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--paper);
            color: var(--ink);
            line-height: 1.6;
            padding: 2rem 1rem;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        /* Password Gate */
        #passwordGate {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--ink);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .gate-box {
            background: white;
            padding: 3rem;
            border-radius: 8px;
            text-align: center;
            max-width: 320px;
        }

        .gate-box h2 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .gate-box p {
            color: var(--gray-dark);
            font-size: 0.85rem;
            margin-bottom: 1.5rem;
        }

        .gate-box input {
            width: 100%;
            padding: 0.8rem;
            font-size: 1.5rem;
            text-align: center;
            border: 2px solid var(--gray-mid);
            border-radius: 4px;
            letter-spacing: 0.5rem;
            margin-bottom: 1rem;
        }

        .gate-box button {
            width: 100%;
            padding: 0.8rem;
            background: var(--ink);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
        }

        .gate-box .error {
            color: var(--accent);
            font-size: 0.8rem;
            margin-top: 1rem;
            display: none;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 2px solid var(--ink);
        }

        .header h1 {
            font-size: 1.8rem;
            font-weight: 700;
            letter-spacing: -0.02em;
        }

        .subtitle {
            color: var(--gray-dark);
            font-size: 0.9rem;
            margin-top: 0.3rem;
        }

        .target-date {
            display: inline-block;
            background: var(--accent);
            color: white;
            padding: 0.4rem 1rem;
            border-radius: 4px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-top: 1rem;
        }

        /* Stats */
        .stats {
            display: flex;
            justify-content: center;
            gap: 2rem;
            padding: 1.5rem;
            background: var(--gray-light);
            margin-bottom: 1.5rem;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
        }

        .stat-label {
            font-size: 0.7rem;
            color: var(--gray-dark);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        /* Phase Timeline */
        .phase-timeline {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 2rem;
            overflow-x: auto;
            padding: 0.5rem 0;
        }

        .phase-item {
            flex: 1;
            min-width: 120px;
            padding: 1rem;
            background: var(--gray-light);
            text-align: center;
            text-decoration: none;
            color: var(--ink);
            transition: all 0.2s;
            cursor: pointer;
        }

        .phase-item:hover {
            background: var(--gray-mid);
        }

        .phase-item.active {
            background: var(--ink);
            color: white;
        }

        .phase-num {
            font-size: 0.65rem;
            font-weight: 600;
            opacity: 0.7;
        }

        .phase-name {
            font-size: 0.9rem;
            font-weight: 600;
            margin: 0.2rem 0;
        }

        .phase-date {
            font-size: 0.7rem;
            opacity: 0.7;
        }

        /* Controls */
        .controls {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 2rem;
            justify-content: center;
        }

        .btn {
            padding: 0.6rem 1.2rem;
            border: 1px solid var(--gray-mid);
            background: white;
            cursor: pointer;
            font-size: 0.85rem;
            border-radius: 4px;
            transition: all 0.2s;
        }

        .btn:hover {
            background: var(--gray-light);
            border-color: var(--ink);
        }

        /* Schedule Content */
        .schedule-section {
            margin-bottom: 2rem;
        }

        .section-title {
            font-size: 1.1rem;
            font-weight: 700;
            padding: 0.8rem 0;
            border-bottom: 2px solid var(--ink);
            margin-bottom: 1rem;
        }

        .section-title:focus {
            outline: 2px solid var(--accent);
            outline-offset: 2px;
        }

        .week-block {
            background: white;
            border: 1px solid var(--gray-mid);
            margin-bottom: 1rem;
            padding: 1rem;
        }

        .week-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.8rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--gray-light);
        }

        .week-title {
            font-weight: 700;
            font-size: 1rem;
        }

        .week-date {
            font-size: 0.8rem;
            color: var(--gray-dark);
        }

        /* Task List */
        .task-list {
            list-style: none;
        }

        .task-item {
            display: flex;
            align-items: flex-start;
            gap: 0.6rem;
            padding: 0.5rem 0;
            border-bottom: 1px solid var(--gray-light);
        }

        .task-item:last-of-type {
            border-bottom: none;
        }

        .checkbox {
            width: 18px;
            height: 18px;
            margin-top: 2px;
            cursor: pointer;
            flex-shrink: 0;
        }

        .task-text {
            flex: 1;
            font-size: 0.9rem;
            min-height: 1.4em;
        }

        .task-text.completed {
            text-decoration: line-through;
            color: var(--gray-dark);
        }

        .week-notes {
            width: 100%;
            margin-top: 1rem;
            padding: 0.8rem;
            border: 1px solid var(--gray-mid);
            border-radius: 4px;
            font-size: 0.85rem;
            font-family: inherit;
            resize: vertical;
            min-height: 60px;
            background: var(--gray-light);
        }

        .week-notes:focus {
            outline: 2px solid var(--accent);
            outline-offset: -2px;
            background: white;
        }

        .week-notes-label {
            font-size: 0.75rem;
            color: var(--gray-dark);
            margin-top: 0.8rem;
            margin-bottom: 0.3rem;
        }

        /* Footer */
        .footer {
            text-align: center;
            margin-top: 3rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--gray-mid);
            font-size: 0.75rem;
            color: var(--gray-dark);
        }

        @media (max-width: 768px) {
            .stats {
                gap: 1rem;
            }

            .stat-value {
                font-size: 1.3rem;
            }

            .phase-item {
                min-width: 100px;
                padding: 0.8rem;
            }
        }
    </style>
</head>

<body>
    <!-- Password Gate -->
    <div id="passwordGate">
        <div class="gate-box">
            <h2>HIPPORIZZ</h2>
            <p>å°ˆæ¡ˆæ™‚ç¨‹è¿½è¹¤ç³»çµ±</p>
            <input type="password" id="accessCode" maxlength="4" placeholder="â€¢â€¢â€¢â€¢">
            <button onclick="checkCode()">é€²å…¥ç³»çµ±</button>
            <p class="error" id="errorMsg">å­˜å–ç¢¼éŒ¯èª¤</p>
        </div>
    </div>

    <!-- Main Content -->
    <div id="mainContent" class="container" style="display: none;">
        <header class="header">
            <h1>Hipporizz èª¿è‰²ç›¤å¾®å…‰é¢¨æ‰‡</h1>
            <p class="subtitle">2026 ä¸‰æœˆåˆä¸Šå¸‚å€’æ¨æ™‚ç¨‹è¡¨</p>
            <div class="target-date">ç›®æ¨™ä¸Šç·šï¼š2026/03/02 (ä¸€)</div>
        </header>

        <!-- Stats Bar -->
        <div class="stats">
            <div class="stat-item">
                <div class="stat-value">9</div>
                <div class="stat-label">ç¸½é€±æ•¸</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="currentWeek">W1</div>
                <div class="stat-label">ç›®å‰é€²åº¦</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="completionRate">0%</div>
                <div class="stat-label">å®Œæˆç‡</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="daysLeft">59</div>
                <div class="stat-label">å‰©é¤˜å¤©æ•¸</div>
            </div>
        </div>

        <!-- Phase Timeline -->
        <div class="phase-timeline">
            <a class="phase-item active" onclick="scrollToSection('phase1')">
                <div class="phase-num">PHASE 1</div>
                <div class="phase-name">ç±Œå‚™æœŸ</div>
                <div class="phase-date">12/30 - 1/11</div>
            </a>
            <a class="phase-item" onclick="scrollToSection('phase2')">
                <div class="phase-num">PHASE 2</div>
                <div class="phase-name">é ç†±æœŸ</div>
                <div class="phase-date">1/12 - 1/31</div>
            </a>
            <a class="phase-item" onclick="scrollToSection('phase3')">
                <div class="phase-num">PHASE 3</div>
                <div class="phase-name">æ˜¥ç¯€ç·©è¡</div>
                <div class="phase-date">2/01 - 2/09</div>
            </a>
            <a class="phase-item" onclick="scrollToSection('phase4')">
                <div class="phase-num">PHASE 4</div>
                <div class="phase-name">è¡åˆºæœŸ</div>
                <div class="phase-date">2/10 - 3/01</div>
            </a>
            <a class="phase-item" onclick="scrollToSection('phase5')">
                <div class="phase-num">PHASE 5</div>
                <div class="phase-name">ä¸Šç·šæ—¥</div>
                <div class="phase-date">3/02</div>
            </a>
        </div>

        <!-- Import Control -->
        <div style="text-align: center; margin-bottom: 1.5rem;">
            <input type="file" id="mdFileInput" accept=".md" style="display: none;" onchange="importMDFile(this)">
            <label for="mdFileInput" class="btn" style="cursor: pointer;">ğŸ“ åŒ¯å…¥ .md æª”æ¡ˆ</label>
        </div>
        <!-- Schedule Content -->
        <div id="scheduleContent">
            <!-- Content will be loaded here -->
        </div>

        <footer class="footer">
            <p>Powered by YMS | ç›®æ¨™ä¸Šç·šæ—¥ï¼š2026/03/02</p>
        </footer>
    </div>

    <script>
        // Password check
        function checkCode() {
            const code = document.getElementById('accessCode').value;
            if (code === "2026") {
                document.getElementById('passwordGate').style.display = 'none';
                document.getElementById('mainContent').style.display = 'block';
                initDashboard();
            } else {
                document.getElementById('errorMsg').style.display = 'block';
                document.getElementById('accessCode').value = '';
            }
        }

        document.getElementById('accessCode').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') checkCode();
        });

        // Initialize
        function initDashboard() {
            // Check for saved data first
            const saved = localStorage.getItem('hipporizz_schedule_v3');
            if (saved) {
                document.getElementById('scheduleContent').innerHTML = saved;
                reattachListeners();
            } else {
                loadSchedule();
            }
            calculateDaysLeft();
            updateStats();
        }

        // Import .md file - only extract W0-W9 tasks
        function importMDFile(input) {
            const file = input.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function (e) {
                const md = e.target.result;
                const weekTasks = parseWeekTasks(md);

                // Update the existing week blocks with imported tasks
                Object.keys(weekTasks).forEach(weekName => {
                    const weekBlocks = document.querySelectorAll('.week-block');
                    weekBlocks.forEach(block => {
                        const titleEl = block.querySelector('.week-title');
                        if (titleEl && titleEl.textContent.trim() === weekName) {
                            const taskList = block.querySelector('.task-list');
                            const addBtn = taskList.querySelector('.add-task-btn');

                            // Remove existing tasks (keep add button)
                            taskList.querySelectorAll('.task-item').forEach(t => t.remove());

                            // Add imported tasks
                            weekTasks[weekName].forEach(task => {
                                const li = createTaskItem(task.text, task.checked);
                                taskList.insertBefore(li, addBtn);
                            });
                        }
                    });
                });

                saveData();
                updateStats();
                alert('å·²åŒ¯å…¥ ' + Object.keys(weekTasks).length + ' å€‹é€±æ¬¡çš„ä»»å‹™ï¼');
            };
            reader.readAsText(file);
            input.value = ''; // Reset for re-import
        }

        // Parse markdown to extract only W0-W9 tasks
        function parseWeekTasks(md) {
            const lines = md.split('\n');
            const weekTasks = {};
            let currentWeek = null;

            lines.forEach(line => {
                // Match week headers like "### W0", "### W1 (01/06 - 01/11)"
                const weekMatch = line.match(/^###\s+(W\d+)/i);
                if (weekMatch) {
                    currentWeek = weekMatch[1].toUpperCase();
                    weekTasks[currentWeek] = [];
                    return;
                }

                // If we're in a week section, look for tasks
                if (currentWeek) {
                    // Match checkbox items: "- [ ] task" or "- [x] task"
                    const taskMatch = line.match(/^-\s*\[([xX\s])\]\s*(.+)/);
                    if (taskMatch) {
                        weekTasks[currentWeek].push({
                            checked: taskMatch[1].toLowerCase() === 'x',
                            text: taskMatch[2].trim()
                        });
                    }

                    // Stop when hitting another section header
                    if (line.match(/^##\s+/) && !line.match(/^###/)) {
                        currentWeek = null;
                    }
                }
            });

            return weekTasks;
        }

        // Load schedule from markdown file
        function loadSchedule() {
            // Parse the schedule data directly (embedded for reliability)
            const scheduleData = [
                {
                    id: 'phase1',
                    title: 'Phase 1: ç±Œå‚™æœŸ (12/30 - 01/11)',
                    weeks: [
                        {
                            name: 'W0',
                            date: '12/30 - 01/05',
                            tasks: [
                                'æ’ç¨‹è¡¨ç¢ºèª',
                                'å•å·è¨­è¨ˆ (SurveyCake)',
                                'ç”¢å“ç´ ææ‹æ”é¢¨æ ¼ç¢ºèª',
                                'æ”å½±å¸«æª”æœŸç¢ºèªï¼ˆ1æœˆä¸­å‰å¿…é ˆæ‹å®Œï¼‰',
                                'æ‹æ”æ¨£å“ç‹€æ…‹ç¢ºèªï¼ˆ+éœ€ç™¼é€10ä»½çµ¦ç¤¾ç¾¤åˆä½œï¼‰'
                            ]
                        },
                        {
                            name: 'W1',
                            date: '01/06 - 01/11',
                            tasks: [
                                'å•å·ç”¢å“æ‹æ”åŸ·è¡Œ + å•å·ç´ æè£½ä½œ',
                                'å½±ç‰‡æ”å½±å¸«æª”æœŸç¢ºèª + å½±ç‰‡è…³æœ¬å®šæ¡ˆ',
                                'KOL åå–®åˆé¸ï¼ˆ10 ä½ 1-5è¬äººfollowerï¼‰',
                                'å›é¥‹æ–¹æ¡ˆè¨­è¨ˆ',
                                'ç”¢å“ç ”ç©¶è²©å”®ç°¡å ±',
                                'é ç®—æ¨¡å‹å®šæ¡ˆ'
                            ]
                        }
                    ]
                },
                {
                    id: 'phase2',
                    title: 'Phase 2: é ç†±æœŸ (01/12 - 01/31)',
                    weeks: [
                        {
                            name: 'W2',
                            date: '01/12 - 01/18',
                            tasks: [
                                'å•å·é é¢ä¸Šç·š + å»£å‘ŠæŠ•æ”¾é–‹å§‹',
                                'KOL åˆç´„ç°½è¨‚ & Brief ç™¼é€',
                                'ç¤¾ç¾¤å…§å®¹è¦åŠƒ'
                            ]
                        },
                        {
                            name: 'W3',
                            date: '01/19 - 01/25',
                            tasks: [
                                'å‹Ÿè³‡é é¢æ–‡æ¡ˆåˆç¨¿å®Œæˆ',
                                'å½±ç‰‡åˆå‰ªé©—æ”¶',
                                'KOL è©¦ç”¨ç”¢å“å¯„é€'
                            ]
                        },
                        {
                            name: 'W4',
                            date: '01/26 - 01/31',
                            tasks: [
                                'å•å·å»£å‘ŠæŒçºŒæŠ•æ”¾ï¼ˆä½æˆæœ¬æœŸï¼‰',
                                'KOL å…§å®¹åˆç¨¿å›æ”¶ & å¯©æ ¸',
                                'å‹Ÿè³‡é é¢è¨­è¨ˆæ’ç‰ˆå®šæ¡ˆ',
                                'å»£å‘Šç´ æåˆæ®µæº–å‚™'
                            ]
                        }
                    ]
                },
                {
                    id: 'phase3',
                    title: 'Phase 3: æ˜¥ç¯€ç·©è¡ (02/01 - 02/09)',
                    weeks: [
                        {
                            name: 'W5',
                            date: '02/01 - 02/09',
                            tasks: [
                                'é é¢æœ€çµ‚ç¢ºèª',
                                'æ‰€æœ‰ KOL å…§å®¹å®šç¨¿',
                                'ä¸Šç·š SOP ç¢ºèª',
                                'ç¬¬ä¸€æ³¢å•å·æ•´ç†',
                                'å»£å‘Šç´ æå®šæ¡ˆ'
                            ]
                        }
                    ]
                },
                {
                    id: 'phase4',
                    title: 'Phase 4: è¡åˆºæœŸ (02/10 - 03/01)',
                    weeks: [
                        {
                            name: 'W6',
                            date: '02/10 - 02/16',
                            tasks: [
                                'å˜–å˜–é é¢ä¸ŠåˆŠï¼ˆé ç•™ä¿®æ”¹æ™‚é–“ï¼‰',
                                'ç¤¾ç¾¤å…§å®¹é å‘Š',
                                'åª’é«”æ›å…‰åŸ·è¡Œ',
                                'EDM / ç°¡è¨Šåå–®æ•´ç†'
                            ]
                        },
                        {
                            name: 'W7',
                            date: '02/17 - 02/23',
                            tasks: [
                                'å€’æ•¸è¨ˆæ™‚ç¤¾ç¾¤é«˜é »æ“ä½œ',
                                'KOL + å‹Ÿè³‡é é¢ç¢ºèª',
                                'æœ€å¾Œå•å·åå–®æ¸…æ´— & åˆ†çœ¾',
                                'åª’é«”/å…¬é—œè¯ç¹«'
                            ]
                        },
                        {
                            name: 'W8',
                            date: '02/24 - 03/01',
                            tasks: [
                                'ä¸Šç·šç•¶æ—¥æµç¨‹ Rehearsal',
                                'æœ€çµ‚å»£å‘Šç´ æç¢ºèª',
                                'å…¨é€šè·¯é å‘Šç™¼å¸ƒ'
                            ]
                        }
                    ]
                },
                {
                    id: 'phase5',
                    title: 'Phase 5: Launch Day (03/02)',
                    weeks: [
                        {
                            name: 'W9',
                            date: '03/02 (ä¸€)',
                            tasks: [
                                '10:00 - EDM ç™¼é€',
                                '10:00 - é é¢é–‹æ”¾',
                                '10:00 - ç¤¾ç¾¤è²¼æ–‡åŒæ­¥ç™¼å¸ƒ',
                                '12:00 - KOL è²¼æ–‡åŒæ­¥ä¸Šç·š',
                                '12:00 - ç°¡è¨Šæ¨æ’­',
                                '12:00 - å»£å‘Šå…¨é¢é–‹å•Ÿ',
                                '19:00 - æª¢è¦–é¦–æ—¥æ•¸æ“šï¼Œèª¿æ•´å»£å‘Šç­–ç•¥'
                            ]
                        }
                    ]
                }
            ];

            renderSchedule(scheduleData);
        }

        function renderSchedule(data) {
            const container = document.getElementById('scheduleContent');
            container.innerHTML = '';

            data.forEach(phase => {
                const section = document.createElement('section');
                section.className = 'schedule-section';
                section.id = phase.id;

                const title = document.createElement('h2');
                title.className = 'section-title';
                title.textContent = phase.title;
                section.appendChild(title);

                phase.weeks.forEach(week => {
                    const weekBlock = document.createElement('div');
                    weekBlock.className = 'week-block';
                    weekBlock.dataset.week = week.name;

                    weekBlock.innerHTML = `
                        <div class="week-header">
                            <span class="week-title">${week.name}</span>
                            <span class="week-date">${week.date}</span>
                        </div>
                    `;

                    const taskList = document.createElement('ul');
                    taskList.className = 'task-list';

                    week.tasks.forEach(task => {
                        const li = createTaskItem(task, false);
                        taskList.appendChild(li);
                    });

                    weekBlock.appendChild(taskList);

                    // Notes section
                    const notesLabel = document.createElement('div');
                    notesLabel.className = 'week-notes-label';
                    notesLabel.textContent = 'ğŸ“ å‚™è¨»';
                    weekBlock.appendChild(notesLabel);

                    const notes = document.createElement('textarea');
                    notes.className = 'week-notes';
                    notes.placeholder = 'å¯åœ¨æ­¤è¼¸å…¥æœ¬é€±å‚™è¨»...';
                    notes.dataset.week = week.name;
                    notes.addEventListener('blur', saveData);
                    weekBlock.appendChild(notes);

                    section.appendChild(weekBlock);
                });

                container.appendChild(section);
            });

            saveData();
        }

        function createTaskItem(text, checked) {
            const li = document.createElement('li');
            li.className = 'task-item';

            const checkbox = document.createElement('input');
            checkbox.type = 'checkbox';
            checkbox.className = 'checkbox';
            checkbox.checked = checked;

            const span = document.createElement('span');
            span.className = 'task-text' + (checked ? ' completed' : '');
            span.textContent = text;

            // Events - only checkbox change
            checkbox.addEventListener('change', () => {
                if (checkbox.checked) span.classList.add('completed');
                else span.classList.remove('completed');
                updateStats();
                saveData();
            });

            li.appendChild(checkbox);
            li.appendChild(span);

            return li;
        }

        function reattachListeners() {
            // Checkbox listeners
            document.querySelectorAll('.task-item').forEach(li => {
                const checkbox = li.querySelector('.checkbox');
                const span = li.querySelector('.task-text');

                checkbox.addEventListener('change', () => {
                    if (checkbox.checked) span.classList.add('completed');
                    else span.classList.remove('completed');
                    updateStats();
                    saveData();
                });
            });

            // Notes listeners
            document.querySelectorAll('.week-notes').forEach(notes => {
                notes.addEventListener('blur', saveData);
            });
        }

        // Save & Load
        function saveData() {
            const html = document.getElementById('scheduleContent').innerHTML;
            localStorage.setItem('hipporizz_schedule_v3', html);
        }

        // Export to Markdown
        function exportToMD() {
            let md = '# Hipporizz æ™‚ç¨‹è¡¨\n\n';

            document.querySelectorAll('.schedule-section').forEach(section => {
                const title = section.querySelector('.section-title');
                if (title) md += '## ' + title.textContent.trim() + '\n\n';

                section.querySelectorAll('.week-block').forEach(week => {
                    const weekTitle = week.querySelector('.week-title');
                    const weekDate = week.querySelector('.week-date');
                    md += '### ' + weekTitle.textContent + ' (' + weekDate.textContent + ')\n\n';

                    week.querySelectorAll('.task-item').forEach(item => {
                        const cb = item.querySelector('.checkbox');
                        const text = item.querySelector('.task-text');
                        const checked = cb && cb.checked ? 'x' : ' ';
                        if (text && text.textContent.trim()) {
                            md += '- [' + checked + '] ' + text.textContent.trim() + '\n';
                        }
                    });
                    md += '\n';
                });
            });

            const blob = new Blob([md], { type: 'text/markdown' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'hipporizz_schedule.md';
            a.click();
            URL.revokeObjectURL(url);
        }

        // Clear current week
        function clearWeek() {
            if (!confirm('ç¢ºå®šè¦æ¸…ç©ºæœ¬é€±ä»»å‹™å—ï¼Ÿ')) return;
            // Find W1 (current week) and clear its tasks
            const w1 = document.querySelector('.week-block');
            if (w1) {
                const tasks = w1.querySelectorAll('.task-item');
                tasks.forEach(t => t.remove());
                saveData();
                updateStats();
            }
        }

        // Utilities
        function updateStats() {
            const checkboxes = document.querySelectorAll('.checkbox');
            let total = checkboxes.length;
            let completed = 0;
            checkboxes.forEach(cb => { if (cb.checked) completed++; });
            const rate = total > 0 ? Math.round((completed / total) * 100) : 0;
            document.getElementById('completionRate').textContent = rate + '%';
        }

        function calculateDaysLeft() {
            const target = new Date('2026-03-02');
            const diff = Math.ceil((target - new Date()) / (1000 * 60 * 60 * 24));
            document.getElementById('daysLeft').textContent = diff > 0 ? diff : 0;
        }

        function scrollToSection(id) {
            const el = document.getElementById(id);
            if (el) el.scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>

</html>